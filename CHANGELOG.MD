
# CHANGELOG
---

<details> <summary>26.01.2021</summary>

## 26.01.2021
ПРИМЕР CHANGELOG-а
Для сущности User добавлены два новых поля:

- *verify_status* - статус верификации пользователя, на данный момент может принимать два значения: *VERIFIED* или *NOT_VERIFIED*. Другие не допускаются.
- *view_only_by_verified* - boolean значение, показывающее, что пользователь разрешил просмотр юзерам со статусом *VERIFIED* (*view_only_by_verified*=true).
Стандартно значение false, это означает, что пользователь доступен всем, вне зависимости от *verify_status*.

Описанная выше логика распространяется на 4 метода:
- *findMyFavoritesForDate*
- *findMyFavoritesForImprovement*
- *findMyUsersForDate*
- *findMyUsersForImprovement*

Оба поля можно изменять в методе "profile", также, они доступны для запроса "user".

——————

Новая таблица *verification_request* (содержит заявки пользователя на верификацию)

Новые Actions:
- создание заявки юзером : *createVerificationRequest*
- отмена заявки юзером (перевод в статус canceled) : *cancelVerificationRequest*
- принятие решения модератором (установка никнейма и перевод в статус approved / отклонение заявки) : *moderateVerificationRequest*

Новое поле в таблице User:
- *nickname*

——————

Новое поле в таблице User:
- *isFamousPerson*

Новый Action:
 - *setIsFamous*

——————

**Исправления ошибок и прочее:**<br/>
Теперь поле phone_number в user неуникально:
теперь после удаления аккаунта пользователь может зарегистрироваться заново, будет создан новый аккаунт для данного номер телефона.
С данным номером может быть только один неудалённый юзер.<br/>
Рефакторинг: теперь, где нужно, в выборках и  прочей логике учитывается статус юзера.

Исправлена ошибка, при которой заполнение ответа на вопрос с is_many_answers=false мог быть удалён ответ другого пользователя.

——————

**UPD:**<br/>
В action-ы на получение списков пользователей в тела ответа добавлено поле lastDirections. Это следующие action-ы:
- *findMyFavoritesForDate*
- *findMyFavoritesForImprovement*
- *findMyUsersForDate*
- *findMyUsersForImprovement*

Авторизация: теперь приложение можно запустить с _авторизацией в тестовом режиме_. В таком режиме вызовов API New-Tel не будет, а код подтверждения будет возвращаться в теле ответа на запрос кода подтверждения.

</details>
